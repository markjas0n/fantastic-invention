{{> header}}

<main>
  <article>
    <h2>{{post.title}}</h2>
    <p>{{post.content}}</p>
    <p>Posted by {{post.user.username}} on {{post.createdAt}}</p>
    <section>
      <h3>Comments</h3>
      {{#each post.comments}}
        <div class="comment">
          <p>{{this.comment_text}}</p>
          <p>By {{this.user.username}} on {{this.createdAt}}</p>
        </div>
      {{/each}}
    </section>
    {{#if logged_in}}
      <form id="comment-form" method="POST" action="/api/comments">
        <textarea id="comment-text" name="comment_text" placeholder="Add a comment" required></textarea>
        <input type="hidden" name="post_id" value="{{post.id}}">
        <button type="submit">Submit Comment</button>
      </form>
    {{else}}
      <p>Please <a href="/login">login</a> to add a comment.</p>
    {{/if}}
  </article>
</main>
